<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="ProductRegistrationMapper">

	<insert id="save" parameterType="cn.cebest.entity.web.ProductRegistration">
		insert into WEB_PRODUCT_REGISTRATION
			(ID,FULLNAME,EMAIL,STREET,LINE,CITY,POSTAL_CODE,COUNTRY,PHONE,PRODUCT,				SPECIFY_OTHER,SERIAL_NUMBER,FILE_NAME,FILE_URL,EXPLANATION,PURCHASE_PLACE,PURCHASE_DATE,REGIST_CODE,No,CREATE_TIME)
		values
		( 			#{id},#{fullName},#{email},#{street},#{line},#{city},#{postalCode},#{country},			#{phone},#{product},#{specifyOther},#{serialNumber},#{fileName},#{fileUrl},			#{explanation},#{placePurchase},#{datePurchase},#{registCode},#{no},now()		)
	</insert>		<!-- 批量保存服务网点信息 -->	<insert id="saveBachProductRegistration" parameterType="cn.cebest.entity.web.ProductRegistration">		insert into WEB_PRODUCT_REGISTRATION			(ID,FULLNAME,EMAIL,STREET,LINE,CITY,POSTAL_CODE,COUNTRY,PHONE,PRODUCT,SPECIFY_OTHER,SERIAL_NUMBER,			 FILE_NAME,FILE_URL,EXPLANATION,PURCHASE_PLACE,PURCHASE_DATE,REGIST_CODE,No,CREATE_TIME)		values		<foreach collection="list" item="proReg" separator="," open="" close="">			(#{proReg.id},#{proReg.fullName},#{proReg.email},#{proReg.street},#{proReg.line},#{proReg.city},#{proReg.postalCode},#{proReg.country},			 #{proReg.phone},#{proReg.product},#{proReg.specifyOther},#{proReg.serialNumber},#{proReg.fileName},#{proReg.fileUrl},			 #{proReg.explanation},#{proReg.placePurchase},#{proReg.datePurchase},#{proReg.registCode},#{proReg.no},now())		</foreach>	</insert>		<!-- 后台接口,站点列表 -->	<select id="listPage" resultType="pd" parameterType="page">		SELECT			WC.ID AS id,			WC.COUNTRY AS country,			WC.FULLNAME AS fullName,			WC.POSTAL_CODE AS postalCode,			WC.EMAIL AS email,			WC.PHONE AS phone,			WC.REGIST_CODE AS registCode,			WC.RECOMMEND AS recommend,			DATE_FORMAT(WC.CREATE_TIME,'%Y-%m-%d %H:%i:%s') AS createTime		FROM			WEB_PRODUCT_REGISTRATION WC		ORDER BY			WC.CREATE_TIME DESC		<!-- <trim prefix="WHERE" prefixOverrides="AND|OR">			<if test="pd.keywords!=null and pd.keywords!=''">				WC.FIRST_NAME LIKE CONCAT(CONCAT('%', #{pd.keywords}), '%')			</if>			<if test="pd.status!=null and pd.status!=''">				AND C.STATUS = #{pd.status}			</if>		</trim> -->	</select>		<delete id="delContactUs" parameterType="pd">		delete from		WEB_CONTACTUS		where CONTACTUS_ID = #{ID}	</delete>
	<delete id="delsContactUs" parameterType="string">		delete from		WEB_CONTACTUS		where CONTACTUS_ID in				<foreach collection="array" open="(" separator="," close=")" item="item">			#{item}		</foreach>	</delete>
		<!-- 获取当前数据库产品最大编号 -->	<select id="getMaxNo" resultType="string">		select			max(NO)		from			WEB_PRODUCT_REGISTRATION	</select>		<!-- 查询序列号是否存在 -->	<select id="getCountBySerialCode" parameterType="string" resultType="int">		select 			count(*)		from			SYS_SERIAL_CODE		where 			CODE = #{code}	</select>		<!-- 修改处理状态 -->	<update id="updataRecommend" parameterType="pd">		UPDATE			WEB_PRODUCT_REGISTRATION		SET 			RECOMMEND = #{recommend}		WHERE			ID=#{id}	</update>		<!-- 根据id查询详情 -->	<select id="detailById" parameterType="string" resultType="pd">		select			ID id,			FULLNAME fullName,			EMAIL email,			STREET street,			LINE line,			CITY city,			POSTAL_CODE postalCode,			COUNTRY country,			PHONE phone,			PRODUCT product,			SPECIFY_OTHER specifyOther,			SERIAL_NUMBER serialNumber,			FILE_NAME fileName,			FILE_URL fileUrl,			EXPLANATION explanation,			PURCHASE_PLACE purchasePlace,			PURCHASE_DATE purchaseDate,			REGIST_CODE registCode,			NO no,			RECOMMEND recommend,			CREATE_TIME createTime		from			WEB_PRODUCT_REGISTRATION		WHERE			ID=#{id}	</select>		<!-- 根据邮箱和注册码查询注册产品 -->	<select id="selectByEmailAndRegistionCode" parameterType="hashmap" resultType="int">		SELECT 			count(*)		FROM			WEB_PRODUCT_REGISTRATION			WHERE			EMAIL=#{email} and 	REGIST_CODE=#{code}	</select>
</mapper>