<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="IpcSiteMsgMapper">
	<!-- 发表站内信 -->	<insert id="saveMsg" parameterType="pd">		INSERT INTO			WEB_SITE_MSG(id,user_id,touser_id,content,type)		VALUES			(#{id},#{userId},#{touserId},#{content},#{type})	</insert>			<!-- 根据userId查询站内信列表 -->	<select id="getAllListByUserIdlistPage" parameterType="pd" resultType="hashmap">		SELECT			WSM.id,			WSM.content,			WSM.type,			WSM.state,			DATE_FORMAT(WSM.create_time,'%Y-%m-%d %H:%i') AS createTime			FROM 			WEB_SITE_MSG WSM		WHERE			WSM.touser_id = #{userId}		ORDER BY 			createTime DESC	</select>		<!-- 获取我的未读消息数 -->	<select id="getNoReadCount" parameterType="String" resultType="int">		SELECT			count(*)		FROM 			WEB_SITE_MSG WSM		WHERE			WSM.touser_id=#{userId} and WSM.state='0'	</select>		<!-- 根据id设置站内信为已读 -->	<update id="setAlreadyRead" parameterType="hashmap">		UPDATE			WEB_SITE_MSG WSM		SET			WSM.state = '1'		WHERE			WSM.id=#{msgId}	</update>		<!-- 根据id获取站内信详情 -->	<select id="getDetailById" parameterType="hashmap" resultType="string">		SELECT			WSM.content		FROM			WEB_SITE_MSG WSM		WHERE			WSM.id=#{msgId}	</select>		<!-- 批量删除站内信 -->	<delete id="deletes" parameterType="string">		DELETE FROM			WEB_SITE_MSG		WHERE			id IN		<foreach collection="array" item="item" open="(" separator="," close=")">			#{item}		</foreach>	</delete>		<!-- 批量设置站内信已读 -->	<delete id="patchSetAllReadyRead" parameterType="string">		UPDATE			WEB_SITE_MSG		SET			state = '1'		WHERE			id IN		<foreach collection="array" item="item" open="(" separator="," close=")">			#{item}		</foreach>	</delete>	</mapper>