<!DOCTYPE html>
<!--[if lt IE 7]><html class="ie ie6 lt8 lt9 lt10"><![endif]-->
<!--[if IE 7]><html class="ie ie7 lt8 lt9 lt10"><![endif]-->
<!--[if IE 8]><html class="ie ie8 lt9 lt10"><![endif]-->
<!--[if IE 9]><html class="ie ie9 lt10"><![endif]-->
<!--[if (gt IE 9) | !(IE)]><!-->
<html>
<head>
<meta charset="utf-8">
<meta name="author" content="guanwang" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="renderer" content="webkit" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1" name="viewport" />
<title>英飞凌电源与传感社区</title>
<link rel="shortcut icon" type="image/x-icon" href="../../staticRelease/img/logo.ico"/>
<script>if (/*@cc_on!@*/false && document.documentMode === 10) document.documentElement.className += ' ie10';</script>
<script>if (/*@cc_on!@*/false && document.documentMode === 11) document.documentElement.className += ' ie11';</script>
<!-- 添加IE10+Class -->
<link rel="stylesheet" href="../../staticRelease/css/common.css">
<link type="text/css" rel="stylesheet" href="../../staticRelease/css/style.css" />
<link rel="stylesheet" type="text/css" href="../../staticRelease/css/z_style.css"/>
<link rel="stylesheet" type="text/css" href="../../staticRelease/css/animate.css" />
<!--公用文件 END-->
<script type="text/javascript" src="../../staticRelease/js/jquery.js"></script>
<script type="text/javascript" src="../../staticRelease/js/wow.min.js"></script>
<script type="text/javascript" src="../../staticRelease/js/cookie.js"></script>
<script type="text/javascript" src="../../staticRelease/js/image-scale.js"></script>
<script type="text/javascript" src="../../staticRelease/js/base.js"></script>
<script type="text/javascript" src="../../staticRelease/js/baseData.js"></script>
<script type="text/javascript" src="../../staticRelease/js/baseData.js"></script>
<script type="text/javascript" src="../../staticRelease/js/index.js"></script>
		<style type="text/css">			
			.footer{
				position: fixed;
				left:0;
				bottom: 0;
				padding:2% 0 1%;
			}
			.footer .footConBox_line1{
				margin-bottom: 4%;
			}
			@media only screen and (max-width:767px) {
				.forget{
					width:94%;
					padding-left:3%;
					padding-right:3%;
					position:inherit;
					left:0;
					top:0;
					-webkit-transform:inherit;
					transform:inherit;
					padding-top:120px;
					margin-bottom:6%;
				}
				.forget .box .input_ipt{
					padding-left:0;
					display:block;
				}	
				.forget .box .input_ipt input{
					width:100%;
					height:32px;
					line-height:32px;
				}
				.forget .box span{
					display:block;
					text-align:left;
				}
				.forget .submit div{
					text-align:center;
					height:36px;
					line-height:36px;
				}
				.forget .content>P{
					width:100%;
					margin-left:0;
				}
				.footer{
					position: inherit;
				}
			}
		</style>
	</head>
	<body>
		<!--[if lt IE 9]>
		  <div class="browserupgrade">
				<div class="con cf">
				<div class="clock">关闭<img src="${autoPath}/staticRelease/img/clos.png" alt=""></div>
		  	<div class="tit"><img src="${autoPath}/staticRelease/img/tan.png" alt="">请升级您的浏览器</div>
				<div class="p">我们抱歉给您带来不便，但您正在使用的浏览器版本过旧，若继续使用此版本浏览器浏览oficec.oceanflowerisland.com，我们将不能为您提供最好的浏览效果，建议您升级浏览器。</div>
				<a href="https://support.microsoft.com/zh-cn/help/17621/internet-explorer-downloads" target="_blank">升级Internet Explorer浏览器</a>&nbsp; &nbsp;&nbsp;
				<a href="https://www.google.com/chrome/browser" target="_blank">安装Google Chrome浏览器</a>&nbsp;&nbsp;&nbsp;
				<a href="https://www.mozilla.org/zh-CN/firefox/" target="_blank">安装Mozilla Firefox浏览器</a>&nbsp;&nbsp;&nbsp;
				<a href="https://support.apple.com/zh_CN/downloads/safari" target="_blank">安装Apple Safari浏览器</a>
				</div>
			</div>
		<![endif]-->
		
		<!--#include file="${autoPath}/staticRelease/include/header.html"-->
		<#include "./include/header.html">
		<div class="forget">
			<h2 class="fnt_32">请输入密码，进行修改</h2>
			<div class="content">
				<div class="box clearfix">
					<span>输入密码<em>*</em></span>
					<div class="input_ipt">
						<input type="password" name="password"/>
						<em></em>
					</div>
				</div>
				<div class="box clearfix">
					<span>确认密码<em>*</em></span>
					<div class="input_ipt">
						<input type="password" name="spassword"/>
						<em></em>
					</div>
				</div>
				<p>密码必须是15～32位的字符，且必须是数字、字母和特殊符号（$@!%*#?&amp;）的组合，且至少包含一位大写字母和一位小写字母。字母区分大小写。</p>
				<div class="submit">
					<div class="reset">点击提交</div>
				</div>
			</div>
		</div>
		<div class="fixBox">
			<div class="content pra"></div>
		</div>
		<#include "./include/footer.html">
		<script type="text/javascript" src="../../staticRelease/js/base64.js"></script>
		<script src="../../staticRelease/js/base64.js" type="text/javascript" charset="utf-8"></script>

	</body>
	<script type="text/javascript">
		
	
	
		$(function(){
			//密码校验
			$("._password").blur(function(){
				var _this = $(this);
				var tex = _this.val();
				checkPassword(_this, tex, '您输入的不能为空,请重新输入');
			}).focus(function(){
				$(this).siblings('em').text('');
			})
			
			
			//密码找回，输入密码
			$(".forget .reset").click(function(){
				var Password=base64encode($('.forget input[name=password]').val());
				var sPassword=base64encode($('.forget input[name=spassword]').val());	
				var email=location.search.split('email=')[1];
				if(email == null){
					email = '${(_const_cas_assertion_.principal.attributes.email)!}';
					email = base64encode(email);
				}
				if (Password=='')  {	
					$('.forget input[name=password]').siblings('em').text('您输入的不能为空,请重新输入')
					return;
				}
				if (Password=='')  {	
					$('.forget input[name=spassword]').siblings('em').text('您输入的不能为空,请重新输入')
					return;
				}
				$.ajax({
					url:baseData.member_base_url+'user/resetPassword',
					type:'post',
					data:{
						password:Password,
						confirmPassword:sPassword,
						email:email,
						errorUrl:baseData.clientUrl+'jump/'+'error.html'
					},
					success:function(e){
						if(e.code!=200){
//							$(".fixBox").show();
							$(".forget .box .input_ipt em").text(e.message)					
						}else if(e.code==200){
							$(".fixBox").show();
							$(".fixBox .content").text('修改成功，请重新登录');		
							setTimeout(function(){
//								$(".SolutionForm, .fixBox").hide();
								$(".fixBox").hide();
								window.location.href=baseData.logoutUrl+"?service="+baseData.clientUrl+"/";
							},3000)										
						}
					}
				})
			})
		});
		
		
		
		
		function checkPassword(_this, val, tips) {
	 		if(checkSpace(_this, val, tips)){
	 			var reg=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{15,32}$/;
	 			if(!(reg.test(val))){ 
			  	 	_this.siblings('em').text("您输入的密码不符合要求，请按要求输入"); 
			   	 	return false; 
				}else{
					return true;
				}
	 		}
	 		return false;
	 	}
	 		 	
	 	function checkSpace(_this,val,tips) {
	 		if (val.length === 0) {
	 			_this.siblings('em').text(tips);
	 			return false;
	 		} 
	 		return true;
	 	}
		
	</script>
</html>          